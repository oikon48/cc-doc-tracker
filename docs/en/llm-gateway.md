---
title: llm-gateway
source: https://code.claude.com/docs/en/llm-gateway.md
fetched: 2025-11-15T09:17:30.128Z
---

# llm-gateway

\# LLM gateway configuration > Learn how to configure Claude Code with LLM gateway solutions, including LiteLLM setup, authentication methods, and enterprise features like usage tracking and budget management. LLM gateways provide a centralized proxy layer between Claude Code and model providers, offering: \* \*\*Centralized authentication\*\* - Single point for API key management \* \*\*Usage tracking\*\* - Monitor usage across teams and projects \* \*\*Cost controls\*\* - Implement budgets and rate limits \* \*\*Audit logging\*\* - Track all model interactions for compliance \* \*\*Model routing\*\* - Switch between providers without code changes ## LiteLLM configuration LiteLLM is a third-party proxy service. Anthropic doesn't endorse, maintain, or audit LiteLLM's security or functionality. This guide is provided for informational purposes and may become outdated. Use at your own discretion. \### Prerequisites \* Claude Code updated to the latest version \* LiteLLM Proxy Server deployed and accessible \* Access to Claude models through your chosen provider ### Basic LiteLLM setup \*\*Configure Claude Code\*\*: #### Authentication methods ##### Static API key Simplest method using a fixed API key: \`\`\`bash theme={null} # Set in environment export ANTHROPIC\_AUTH\_TOKEN=sk-litellm-static-key # Or in Claude Code settings { "env": { "ANTHROPIC\_AUTH\_TOKEN": "sk-litellm-static-key" } } \`\`\` This value will be sent as the \`Authorization\` header. ##### Dynamic API key with helper For rotating keys or per-user authentication: 1. Create an API key helper script: \`\`\`bash theme={null} #!/bin/bash # ~/bin/get-litellm-key.sh # Example: Fetch key from vault vault kv get -field=api\_key secret/litellm/claude-code # Example: Generate JWT token jwt encode \\ --secret="${JWT\_SECRET}" \\ --exp="+1h" \\ '{"user":"'${USER}'","team":"engineering"}' \`\`\` 2. Configure Claude Code settings to use the helper: \`\`\`json theme={null} { "apiKeyHelper": "~/bin/get-litellm-key.sh" } \`\`\` 3. Set token refresh interval: \`\`\`bash theme={null} # Refresh every hour (3600000 ms) export CLAUDE\_CODE\_API\_KEY\_HELPER\_TTL\_MS=3600000 \`\`\` This value will be sent as \`Authorization\` and \`X-Api-Key\` headers. The \`apiKeyHelper\` has lower precedence than \`ANTHROPIC\_AUTH\_TOKEN\` or \`ANTHROPIC\_API\_KEY\`. #### Unified endpoint (recommended) Using LiteLLM's \[Anthropic format endpoint\](https://docs.litellm.ai/docs/anthropic\_unified): \`\`\`bash theme={null} export ANTHROPIC\_BASE\_URL=https://litellm-server:4000 \`\`\` \*\*Benefits of the unified endpoint over pass-through endpoints:\*\* \* Load balancing \* Fallbacks \* Consistent support for cost tracking and end-user tracking #### Provider-specific pass-through endpoints (alternative) ##### Claude API through LiteLLM Using \[pass-through endpoint\](https://docs.litellm.ai/docs/pass\_through/anthropic\_completion): \`\`\`bash theme={null} export ANTHROPIC\_BASE\_URL=https://litellm-server:4000/anthropic \`\`\` ##### Amazon Bedrock through LiteLLM Using \[pass-through endpoint\](https://docs.litellm.ai/docs/pass\_through/bedrock): \`\`\`bash theme={null} export ANTHROPIC\_BEDROCK\_BASE\_URL=https://litellm-server:4000/bedrock export CLAUDE\_CODE\_SKIP\_BEDROCK\_AUTH=1 export CLAUDE\_CODE\_USE\_BEDROCK=1 \`\`\` ##### Google Vertex AI through LiteLLM Using \[pass-through endpoint\](https://docs.litellm.ai/docs/pass\_through/vertex\_ai): \`\`\`bash theme={null} export ANTHROPIC\_VERTEX\_BASE\_URL=https://litellm-server:4000/vertex\_ai/v1 export ANTHROPIC\_VERTEX\_PROJECT\_ID=your-gcp-project-id export CLAUDE\_CODE\_SKIP\_VERTEX\_AUTH=1 export CLAUDE\_CODE\_USE\_VERTEX=1 export CLOUD\_ML\_REGION=us-east5 \`\`\` ### Model selection By default, the models will use those specified in \[Model configuration\](/en/third-party-integrations#model-configuration). If you have configured custom model names in LiteLLM, set the aforementioned environment variables to those custom names. For more detailed information, refer to the \[LiteLLM documentation\](https://docs.litellm.ai/). ## Additional resources \* \[LiteLLM documentation\](https://docs.litellm.ai/) \* \[Claude Code settings\](/en/settings) \* \[Enterprise network configuration\](/en/network-config) \* \[Third-party integrations overview\](/en/third-party-integrations)